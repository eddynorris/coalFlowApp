<div class="inventory-container p-4 md:p-6">
    <mat-card class="mat-elevation-z4">
      <mat-card-header class="mb-4">
        <mat-card-title>
          <h2 class="text-2xl font-semibold">Inventario Actual de Carbón</h2>
        </mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <div *ngIf="isLoading()" class="loading-indicator">
          <mat-progress-spinner mode="indeterminate" diameter="50"></mat-progress-spinner>
          <p>Cargando inventario...</p>
        </div>
  
        <div *ngIf="!isLoading() && inventoryDisplayItems().length === 0; else inventoryTable" class="no-data">
          No hay datos de inventario disponibles.
        </div>
  
        <ng-template #inventoryTable>
          <div class="overflow-x-auto">
            <table mat-table [dataSource]="inventoryDisplayItems()" [trackBy]="trackById" class="w-full">
              <!-- Columna Ciudad -->
              <ng-container matColumnDef="cityName">
                <th mat-header-cell *matHeaderCellDef mat-sort-header>Ciudad</th>
                <td mat-cell *matCellDef="let item">{{ item.cityName }}</td>
              </ng-container>
  
              <!-- Columna Depósito -->
              <ng-container matColumnDef="depotName">
                <th mat-header-cell *matHeaderCellDef mat-sort-header>Depósito</th>
                <td mat-cell *matCellDef="let item">{{ item.depotName }}</td>
              </ng-container>
  
              <!-- Columna Tipo de Carbón -->
              <ng-container matColumnDef="coalTypeName">
                <th mat-header-cell *matHeaderCellDef mat-sort-header>Tipo de Carbón</th>
                <td mat-cell *matCellDef="let item">{{ item.coalTypeName }}</td>
              </ng-container>
  
              <!-- Columna Cantidad -->
              <ng-container matColumnDef="quantity">
                <th mat-header-cell *matHeaderCellDef mat-sort-header class="text-right">Cantidad (Ton)</th>
                <td mat-cell *matCellDef="let item" class="text-right" 
                    [matTooltip]="'Stock: ' + (item.quantity | number:'1.0-2') + ' toneladas'" 
                    matTooltipPosition="above">
                  {{ item.quantity | number:'1.0-2' }}
                </td>
              </ng-container>
  
              <!-- Columna Última Actualización -->
              <ng-container matColumnDef="lastUpdated">
                <th mat-header-cell *matHeaderCellDef mat-sort-header>Últ. Actualización</th>
                <td mat-cell *matCellDef="let item">
                  {{ item.lastUpdated | date:'dd/MM/yyyy HH:mm' }}
                </td>
              </ng-container>
  
              <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
              <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
            </table>
          </div>
        </ng-template>
      </mat-card-content>
    </mat-card>
  </div>